!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";class i{constructor(e){if(this.length=0,1===e.nodeType||e===document)this[0]=e,this.length=1;else if("string"==typeof e)if(e=e.trim(),/^<(\w+)[^>]*?>([\s\S]*?<\/\1>)*$/i.test(e)){let t=document.createElement("div");t.innerHTML=e,this[0]=t.childNodes[0],this.length=1,t=null}else{let t=document.querySelectorAll(e);this.length=t.length;for(let e=0;e<this.length;e++)this[e]=t[e];t=null}else if(e.length&&3!==e.nodeType){this.length=e.length;for(let t=0;t<this.length;t++)this[t]=e[t]}e=null}find(e){let t=[];for(let n=0;n<this.length;n++){let i=this[n].querySelectorAll(e),a=i.length;for(let e=0;e<a;e++)t.push(i[e])}return new i(t)}parents(e="",t=0){let n=[],a=t&&1===t.nodeType?t:document.documentElement;"number"==typeof e&&(t=e,e=null);for(let i=0;i<this.length;i++){let o=this[i].parentNode;if("number"==typeof t&&t>0)for(;t--;)s();else for(;o!==a;)s();function s(){if(e){let t=o.parentNode.querySelectorAll(e);for(let e=0,i=t.length;e<i;e++)t[e]===o&&n.push(o)}else n.push(o);o=o.parentNode}}return new i(n)}children(e=""){let t=[];for(let n=0;n<this.length;n++){let i=e?this[n].querySelectorAll(e):this[n].childNodes;for(let e=0,a=i.length;e<a;e++)i[e].parentNode===this[n]&&1===i[e].nodeType&&t.push(i[e])}return new i(t)}first(){return new i(this[0])}last(){return new i(this[this.length-1])}textNodes(){let e=[];for(let e=0;e<this.length;e++)t(this[e]);function t(n){let i=n.childNodes;for(let n=0,a=i.length;n<a;n++)3===i[n].nodeType?e.push(i[n]):t(i[n])}return e}each(e){if(!e)return this;for(let t,n=0;n<this.length;n++)if("continue"!==(t=e.call(this[n],this[n],n))){if("break"===t)break;if(void 0!==t)return t}return this}on(e,t,n=!1){for(let i=0;i<this.length;i++)this[i].addEventListener(e,t,n);return this}off(e,t,n=!1){for(let i=0;i<this.length;i++)this[i].removeEventListener(e,t,n);return this}append(){let e=i.argsToFragment(arguments);for(let t=0;t<this.length;t++)t<this.length-1?this[t].appendChild(e.cloneNode(!0)):this[t].appendChild(e);return this}prepend(){let e=i.argsToFragment(arguments);for(let t=0;t<this.length;t++)t<this.length-1?this[t].insertBefore(e.cloneNode(!0),this[t].childNodes[0]):this[t].insertBefore(e,this[t].childNodes[0]);return this}after(){let e=i.argsToFragment(arguments);for(let t=0;t<this.length;t++)t<this.length-1?this[t].parentNode.insertBefore(e.cloneNode(!0),this[t].nextSibling):this[t].parentNode.insertBefore(e,this[t].nextSibling);return this}before(){let e=i.argsToFragment(arguments);for(let t=0;t<this.length;t++)t<this.length-1?this[t].parentNode.insertBefore(e.cloneNode(!0),this[t]):this[t].parentNode.insertBefore(e,this[t]);return this}remove(){for(let e=0;e<this.length;e++)this[e].parentNode.removeChild(this[e]);return this}static argsToFragment(e){if(11===e[0].nodeType)return e[0];let t=document.createDocumentFragment();return function e(n){for(let i=0,a=n.length,s=0;i<a;i++)if(1===n[i].nodeType)t.appendChild(n[i]);else if(s=n[i].length&&"string"!=typeof n[i])e(n[i]);else if(/^<(\w+)[^>]*?>([\s\S]*?<\/\1>)*$/i.test(n[i])){let e=document.createElement("div");e.innerHTML=n[i],t.appendChild(e.childNodes[0]),e=null}else t.appendChild(document.createTextNode(n[i]))}(e),t}has(e){e instanceof i&&(e=e[0]);for(let t=0;t<this.length;t++)if(this[t].contains(e))return!0;return!1}attr(e,t=""){if(!t)return this[0].getAttribute(e);for(let n=0;n<this.length;n++)this[n].setAttribute(e,t);return this}removeAttr(e){for(let t=0;t<this.length;t++)this[t].removeAttribute(e);return this}data(e,t=""){if(document.documentElement.dataset){if(!t)return this[0].dataset[e];for(let n=0;n<this.length;n++)this[n].dataset[e]=t}else{if(!t)return this.attr("data-"+e);this.attr("data-"+e,t)}return this}css(e){if("object"==typeof e)for(let t=0;t<this.length;t++)for(let n in e)this[t].style[n]=e[n];else if("string"==typeof e){if(void 0===arguments[1])return this[0].style[e];for(let t=0;t<this.length;t++)this[t].style[e]=arguments[1]}return this}addClass(e){if(document.documentElement.classList)for(let t=0;t<this.length;t++)this[t].classList.add(e);else for(let t=0;t<this.length;t++)if(this[t].className){let n=this[t].className.split(/\+/);-1===n.indexOf(e)&&n.push(e),this[t].className=n.join(" ")}else this[t].className=e;return this}removeClass(e){if(document.documentElement.classList)for(let t=0;t<this.length;t++)this[t].classList.remove(e);else for(let t=0;t<this.length;t++)if(this[t].className){let n=this[t].className.split(/\+/);n.slice(n.indexOf(e),1),this[t].className=n.join(" ")}else this[t].className=e;return this}hasClass(e){for(let t=0;t<this.length;t++)if(-1!==this[t].className.split(/\s+/).indexOf(e))return!0;return!1}toggleClass(e){if(document.documentElement.classList)for(let t=0;t<this.length;t++)this[t].classList.toggle(e);else for(let t=0;t<this.length;t++){let n=this[t].className.split(/\s+/);-1!==n.indexOf(e)?n.splice(n.indexOf(e),1):n.push(e),this[t].className=n.join(" ")}return this}html(){if(!(arguments.length>0))return this[0].innerHTML.trim();for(let e=0;e<this.length;e++)this[e].innerHTML=arguments[0];return this}text(){if(!(arguments.length>0))return this[0].innerText.trim();for(let e=0;e<this.length;e++)this[e].innerText=arguments[0];return this}val(){if(!(arguments.length>0))return this[0].value.trim();for(let e=0;e<this.length;e++)this[e].value=arguments[0];return this}indexOf(e){e instanceof i&&(e=e[0]);for(let t=0;t<this.length;t++)if(e===this[t])return t;return-1}static toString(){return"re{ [native code] }"}}function a(e){return new i(e)}a.toString=i.toString,t.a=a},function(e,t,n){"use strict";var i=n(0);t.a={range(e=null){let t=window.getSelection();if(!(e instanceof Range))return t.rangeCount?t.getRangeAt(0):document.createRange();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)},isEmpty:e=>"{}"===JSON.stringify(e),dialog(e,t=document.body){let n,a=Object(i.a)('<div class="re-dialog">'),s=Object(i.a)('<div class="re-dialog-wrapper" style="'+e.css+'">'),o=Object(i.a)('<div class="re-dialog-header re-'+(e.type||"success")+'">'+(e.title||"弹窗")+"</div>"),r=Object(i.a)('<div class="re-dialog-body">'+(e.body||"")+"</div>"),l=Object(i.a)('<div class="re-dialog-footer">'),d=Object(i.a)('<b class="re-dialog-close">&times;</b>');function c(t){"function"==typeof e.clicked?!1!==e.clicked.call(this,n?n.indexOf(this):-1,a,t)&&u():u()}function h(e){e.target===this&&c.call(this,e)}function u(){n&&n.off("click",c),d.off("click",c),a.off("click",h),a.remove(),n=null}s.append(d,o,r,l),a.append(s),Object(i.a)(t).append(a),d.on("click",c),a.on("click",h),Array.isArray(e.btns)&&(e.btns.forEach(e=>{l.append(Object(i.a)('<button class="re-btn-m re-btn-'+(e.type||"success")+'">'+(e.html||e)+"</button>").on("click",c))}),n=l.find("button")),"function"==typeof e.created&&e.created(a)},menu(e,t=document.body){if("object"!=typeof e)throw new Error("The first parameter of menu must be an object not null!");if(!Array.isArray(e.items))return;let n,a=Object(i.a)('<div class="re-menu" style="left: '+(e.x||0)+"px; top: "+(e.y||0)+'px">'),s=Object(i.a)(document);function o(){"function"==typeof e.onclick&&e.onclick(Object(i.a)(this)),l()}function r(e){a.has(e.target)||l()}function l(){"function"==typeof e.onhide&&e.onhide(),n.off("click",o,!1),s.off("mouseup",r,!1),a.remove()}e.items.forEach(e=>{let t=Object(i.a)('<div class="re-menu-item"'+(e.css?' style="'+e.css+'"':"")+">"+(e.html||"")+"</div>");if("object"==typeof e.data)for(let n in e.data)t.data(n,e.data[n]);else t.data("name",e.data);t.on("click",o,!1),a.append(t)}),n=a.children(),Object(i.a)(t).append(a),s.on("mouseup",r,!1)},exec(e){e.range&&!e.range.collapsed&&(this.range(e.range),document.execCommand(e.cmdName,!1,e.cmdValue),e.value&&e.name&&e.context&&e.selector&&e.selector.forEach(t=>{e.context.find(t).each(t=>{if(t.style[e.name]=e.value,"FONT"===t.tagName){let e=Object(i.a)('<span style="'+t.attr("style")+'">'+t.innerHTML+"</span>");t.parentNode.replaceChild(e[0],t)}})}))},mediaThumb(e){let t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,e.background&&(n.fillStyle=e.background,n.fillRect(0,0,t.width,t.height)),e.text&&(n.font=(e.fontWeight||"bold")+" "+(e.fontSize||"36px")+" "+(e.fontFamily||'"microsoft yahei","Open Sans", sans-serif'),n.fillStyle=e.color||"#555",n.textAlign="center",n.textBaseline="middle",n.fillText(e.text,t.width/2,t.height/2)),e.image&&n.drawImage(e.image,0,0,t.width,t.height),n.globalAlpha=e.opacity||.7;let i=t.width/2-18,a=t.height/2-18;return n.beginPath(),n.arc(i+14,a+18,28,0,2*Math.PI),n.strokeStyle=e.button||"#fff",n.lineWidth=4,n.closePath(),n.stroke(),n.beginPath(),n.moveTo(i,a),n.lineTo(i+36,a+18),n.lineTo(i,a+36),n.fillStyle=e.button||"#fff",n.closePath(),n.fill(),t.toDataURL("image/png")}}},function(e,t,n){"use strict";const i=["#ffffff","#eeeeee","#aaaaaa","#000000","#445566","#4477cc","#5599dd","#aa0000","#cc0000","#ee7733","#ffcc00","#77aa44"];t.a={name:"reditor",tools:{removeformat:"清除格式",upload:{title:"添加文件",params:!0},zhconv:{icon:"简",title:"简繁体切换",params:"./lib/zh_lib.js"},replace:{title:"查找替换",params:!0},bold:"加粗",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",superscript:"上标",fontname:{title:"字体",params:["Helvetica","MicrosoftYaHei","Arial","SimHei","SimSum","FangSong","KaiTi","STKaiti","STSong","STFangSong"]},fontsize:{title:"字号",params:[12,13,14,16,18,20,22,24,28,32,36,42,48,56,72]},linespacing:{title:"行距",params:[1,1.5,1.6,1.8,2,2.5,3,3.5,4,4.5,5]},forecolor:{title:"前景色",params:i},backcolor:{title:"背景色",params:i},justifyleft:{title:"左对齐",params:!0},justifycenter:"居中对齐",justifyright:"右对齐",justifyfull:"两端对齐",indent:"段落缩进",outdent:"减去缩进",link:{title:"添加超链接",params:!0},unlink:"删除超链接",code:{title:"插入代码",params:!0}},upload:{field:"file",type:{image:["jpg","jpeg","gif","png","webp","ico","bmp"],video:["mp4","ogg","webm","mkv"],audio:["mp3"],other:["pdf","txt"]},size:{image:1,video:1024,audio:12,other:1024},thumb:{width:480,height:"auto"},logo:{path:"./themes/logo.png",targetWidth:600,width:120,alpha:65,position:5},path:"http://localhost/demo/data.php",form:'<label class="re-label">缩略图(仅图片和视频)：<input class="re-checkbox-s" type="checkbox" name="thumb"></label>'}}},function(e,t,n){"use strict";n.r(t);n(16);var i=n(2),a=n(1),s=n(0),o={A(e){let t,n;return{title:"设置超链接属性",body:`<p>输入地址：\n\t\t\t\t<input class="re-input-m" type="text" name="url" value="${e.href}" style="width: 240px;">\n\t\t\t</p>\n\t\t\t<p>打开模式：\n\t\t\t\t<select class="re-input-m" name="target">\n\t\t\t\t\t<option value="_blank">在新建窗口打开</option>\n\t\t\t\t\t<option value="_self">在当前窗口打开</option>\n\t\t\t\t</select>\n\t\t\t</p>`,btns:["确定",{html:"取消",type:"warning"}],created(i){t=i.find("[name=url]"),n=i.find("[name=target]"),t[0].value=e.getAttribute("href"),n[0].value=e.getAttribute("target")||"_self"},clicked(){e.href=t[0].value,e.target=n[0].value}}},IMG(e,t){let n=this,i="white-space:nowrap;font-size:14px;";return{x:e.clientX,y:e.clientY,items:[{css:i,html:"添加文件描述",data:{name:"desc"}},{css:i,html:"修改文件样式",data:{name:"scale"}}],onclick(e){switch(e.data("name")){case"desc":n.IMGDesc(t);break;case"scale":n.IMGScale(t)}}}},IMGScale(e){let t;function n(){"textAlign"===this.name?e.parentNode.style[this.name]=this.value:e.style[this.name]=this.value}a.a.dialog({title:"设置图片属性",body:'<p>\n                        宽度：<input class="re-input-m" type="text" placeholder="自动" name="width">\n                        <br>\n                        上限：<input class="re-input-m" type="text" placeholder="100%" name="maxWidth">\n                        <br>\n                        下限：<input class="re-input-m" type="text" placeholder="自动" name="minWidth">\n                    </p>\n                    <p>\n                        高度：<input class="re-input-m" type="text" placeholder="自动" name="height">\n                        <br>\n                        上限：<input class="re-input-m" type="text" placeholder="自动" name="maxHeight">\n                        <br>\n                        下限：<input class="re-input-m" type="text" placeholder="自动" name="minHeight">\n                    </p>\n                    <p>\n                        对齐：<select class="re-input-m" name="textAlign">\n                            <option value="left">靠左</option>\n                            <option value="center">居中</option>\n                            <option value="right">靠右</option>\n                        </select>\n                    </p>\n                    <p>\n                        浮动：<select class="re-input-m" name="float">\n                            <option value="none">默认</option>\n                            <option value="left">左浮</option>\n                            <option value="right">右浮</option>\n                        </select>\n                    </p>',created(i){t=i.find("[name]").on("input",n).each(t=>{switch(t.name){case"textAlign":t.value=e.parentNode.style[t.name]||"left";break;case"float":t.value=e.style[t.name]||"none";break;default:t.value=e.style[t.name]}})},clicked(){t.off("input",n)}})},IMGDesc(e){let t=Object(s.a)('<span style="display: inline-block;text-align: left; color: gray; font-size: .9em;">在此输入文件描述</span>'),n=document.createRange();e.after(t[0]),e.after(Object(s.a)("<br>")[0]),t[0].parentNode.style.textAlign="center",n.selectNode(t[0]),n.collapse(!1),a.a.range(n)}};const r=n(15),l={},d=a.a.mediaThumb({width:480,height:270,text:"AUDIO",background:"#ddd",color:"#666"});var c=class{constructor(e,t=null){if(!e)throw new Error("The first parameter of Reditor's constructor must be a selector");if(t&&"object"==typeof t)for(let e in t)t.hasOwnProperty(e)&&(i.a[e]=t[e]);t=null,this.selector=e,this.options=i.a,this.update(),document.execCommand("formatBlock",!1,"p");try{document.execCommand("styleWithCss",!1,!0)}catch(e){a.a.dialog({title:"提醒!",css:"max-width:320px",body:"您的浏览器兼容性差，建议使用其他现代浏览器",type:"warning"})}}update(){if(!this.selector)throw new Error("The editor is already destroyed");if(this.editor=Object(s.a)(this.selector),!this.editor.length)throw new Error("Can't get editor's container element by the selector \""+this.selector+'"');this.range="",this.editor.html(""),this.toolbar=this.createToolbar(i.a.tools),this.edit=this.createEdit(),this.editor.append(this.toolbar),this.editor.append(this.edit),this.edit[0].focus(),this.range=a.a.range()}createToolbar(e){let t,n,i,o=this,d=Object(s.a)('<div class="re-toolbar">');for(i in l.toolshandler=function(t){let n=this.getAttribute("data-name");if(o.edit[0].focus(),a.a.range(o.range),n&&(document.activeElement===o.edit[0]||"source"===n))if(void 0===e[n].params)document.execCommand(n),o.range=a.a.range();else{let e=r("./"+n+".js");"function"==typeof e?e(o,n,t,this):e.default&&"function"==typeof e.default&&e.default(o,n,t,this)}},e)e.hasOwnProperty(i)&&(t="object"==typeof e[i]?e[i].title:e[i],(n=Object(s.a)('<div class="re-tool re-tool-'+i+'" title="'+t+'" data-name="'+i+'">'+(e[i].icon||'<i class="icon icon-'+i+'"></i>')+"</div>")).on("click",l.toolshandler),d.append(n));return d}createEdit(){let e=this,t=Object(s.a)('<div class="re-edit" contentEditable="true" spellcheck="false"></div>');function n(){Object(s.a)(document).off("mouseup",n),e.range=a.a.range()}return l.editmousedown=(t=>{switch(t.target.tagName){case"IMG":e.range.selectNode(t.target),a.a.range(e.range);break;default:Object(s.a)(document).on("mouseup",n),e.range=a.a.range()}}),l.editkeydown=(t=>{e.range=a.a.range(),13===t.keyCode&&(t.shiftKey||(t.preventDefault(),e.paragraph()))}),l.editkeyup=(t=>{13===t.keyCode&&t.preventDefault(),e.range=a.a.range()}),l.editcontextmenu=(e=>{switch(e.target.tagName){case"IMG":e.preventDefault(),a.a.menu(o.IMG(e,e.target));break;case"A":e.preventDefault(),a.a.dialog(o.A(e.target))}}),t.on("mousedown",l.editmousedown),t.on("keyup",l.editkeyup),t.on("keydown",l.editkeydown),t.on("contextmenu",l.editcontextmenu),t}paragraph(){let e=this.range.startContainer,t=document.createElement("p"),n=this.range.startOffset,i=this.range.endOffset;if(e===this.edit[0]||e.parentNode===this.edit[0]&&3===e.nodeType)document.execCommand("formatBlock",!1,"p");else{for(;e.parentNode!==this.edit[0];)e=e.parentNode;1===e.nodeType&&(n!==i&&this.range.deleteContents&&this.range.deleteContents(),this.range.setEnd(e,e.childNodes.length),this.edit[0].insertBefore(t,e.nextSibling),t.appendChild(this.range.extractContents()),t.innerHTML||(t.innerHTML="<br>"),e.innerHTML||(e.innerHTML="<br>"),this.range.setStart(t,0),this.range.collapse(!0))}return t}addMedia(e,t,n=""){let i=document.createElement("img");if(i.style.maxWidth="90%","image"===t)i.src=e;else if("video"===t){let t=new Image;t.crossOrigin="Anonymous",t.onload=function(){i.src=a.a.mediaThumb({width:t.width,height:t.height,image:t}),t=t.onload=t.onerror=null},t.onerror=function(){console.log("无缩略图"),t=t.onload=t.onerror=null},t.src=n,i.setAttribute("data-re-thumb",n),i.setAttribute("data-re-video",e)}else"audio"===t&&(i.src=d,i.setAttribute("data-re-audio",e));this.range.deleteContents&&this.range.deleteContents(),this.range.insertNode(i),this.range.collapse(!1)}setContent(e){if(!e)return;this.edit.html(e);let t=this.edit.find("video"),n=this.edit.find("audio");t.each(e=>{let t=e.getAttribute("style"),n=e.getAttribute("poster"),i=document.createElement("img"),o=new Image;o.crossOrigin="Anonymous",o.onload=function(){i.src=a.a.mediaThumb({width:o.width,height:o.height,image:o}),o=o.onload=o.onerror=null},o.onerror=function(){console.log("无缩略图"),o=o.onload=o.onerror=null},o.src=n,t=t?' style="'+t+'"':"",i.setAttribute("data-re-thumb",n),i.setAttribute("data-re-video",e.src),i.setAttribute("style",t),i.src=n,Object(s.a)(e).after(i).remove()}),n.each(e=>{let t=e.getAttribute("style");t=t?' style="'+t+'"':"",Object(s.a)(e).after('<img src="'+d+'" data-re-audio="'+e.src+'"'+t+">").remove()})}getContent(){let e=Object(s.a)("<div>"+this.edit.html()+"</div>"),t=e.find("img[data-re-video]"),n=e.find("img[data-re-audio]"),i=/width|height|float/gi;return t.each(e=>{let t=e.getAttribute("style"),n=e.getAttribute("data-re-video"),a=t.split(";"),o=[];for(let e=a.length;e--;)i.test(a[e])&&o.push(a[e]);t=o.length?' style="'+o.join(";")+'"':"",Object(s.a)(e).after("<video"+t+' src="'+n+'" controls poster="'+(e.getAttribute("data-re-thumb")||"")+'"><embed'+t+' src="'+n+'" type="application/x-mplayer2" showcontrols="true" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></video>').remove()}),n.each(e=>{let t=e.getAttribute("style"),n=e.getAttribute("data-re-audio"),a=t.split(";"),o=[];for(let e=a.length;e--;)i.test(a[e])&&o.push(a[e]);t=o.length?' style="'+o.join(";")+'"':"",Object(s.a)(e).after("<audio"+t+' src="'+n+'" controls><embed'+t+' src="'+n+'" type="application/x-mplayer2" showcontrols="true" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></audio>').remove()}),e.html()}destroy(e=!1){if(this.edit.off("mousedown",l.editmousedown),this.edit.off("keyup",l.editkeyup),this.edit.off("keydown",l.editkeydown),this.edit.off("contextmenu",l.editcontextmenu),this.toolbar.children().off("click",l.toolshandler),e){this.editor.children().remove();for(let e in this)delete this[e]}}};window.Reditor=c},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(2),s=n(1);const o=Object(i.a)('<canvas style="position: fixed; top: -99999px;"></canvas>'),r=o[0].getContext("2d"),l=new Image,d=a.a.upload.logo.path,c=["top:2px;left:2px;","top:2px;right:2px;","top:0;bottom:0;left:0;right:0;margin:auto;","bottom:2px;left:2px;","bottom:2px;right:2px;"],h="width:7.5em;font-size:14px;text-align:right;display:inline-block;",u="width:6em;text-align:center;";var p=new class{constructor(){this.items=Object.create(null),this.handlers=Object.create(null)}create(e){let t,n=this,a=Object(i.a)('<img src="'+d+'" class="re-upload-item-logo active">');function o(t){t.preventDefault(),s.a.menu({x:t.clientX,y:t.clientY,items:[{html:"开启logo",data:{name:"add"}},{html:"关闭logo",data:{name:"del"}},{html:"开启所有logo",data:{name:"addAll"}},{html:"关闭所有logo",data:{name:"delAll"}},{html:"设置logo属性",data:{name:"setAttr"}}],onclick(t){switch(t.data("name")){case"del":a.removeClass("active"),n.items[e].status=0;break;case"add":a.addClass("active"),n.items[e].status=1;break;case"delAll":for(let e in n.items)n.items[e].el.removeClass("active"),n.items[e].status=0;break;case"addAll":for(let e in n.items)n.items[e].el.addClass("active"),n.items[e].status=1;break;case"setAttr":n.setAttr(e)}}})}return this.items[e]={el:a,status:1,targetWidth:600,width:120,alpha:65,position:4},t=this.items[e].position,Object.defineProperty(this.items[e],"position",{set(e){e!==t&&(a.attr("style",c[e]),t=e)},get:()=>t}),a.on("contextmenu",o),this.handlers[e]=o,a}setAttr(e){let t=this,n=null,i=null;s.a.dialog({title:"设置logo属性",body:`<b>在网页中的实际属性：</b>\n            <p>\n                <span style="${h}">图片宽度：</span>\n                <input class="re-input-m" type="text" name="targetWidth" style="${u}"> px\n            </p>\n            <p>\n                <span style="${h}">logo宽度：</span>\n                <input class="re-input-m" type="text" name="width" style="${u}"> px\n            </p>\n            <p>\n                <span style="${h}">logo透明度：</span>\n                <input class="re-input-m" type="text" name="alpha" style="${u}"> %\n            </p>\n            <p>\n                <span style="${h}">logo位置：</span>\n                <select class="re-input-m" name="position" style="${u}">\n                    <option value="0">左上</option>\n                    <option value="1">右上</option>\n                    <option value="2">中心</option>\n                    <option value="3">左下</option>\n                    <option value="4">右下</option>\n                </select>\n            </p>\n            <p>\n                <span style="${h}; color:#b2512f;">应用于所有：</span>\n                <input class="re-checkbox-s" type="checkbox" name="all">\n            </p>`,btns:["确定",{html:"取消",type:"warning"}],created(a){(n=a.find("[name]")).each(n=>{"all"===n.name&&(i=n),t.items[e].hasOwnProperty(n.name)&&(n.value=t.items[e][n.name])})},clicked(a){a||n.each(n=>{if(i.checked)for(let e in t.items)t.items[e].hasOwnProperty(n.name)&&(t.items[e][n.name]=parseFloat(n.value));else t.items[e].hasOwnProperty(n.name)&&(t.items[e][n.name]=parseFloat(n.value))})}})}remove(e){if(e)this.items[e]&&(this.items[e].el.off("contextmenu",this.handlers[e]),this.items[e].el.remove(),delete this.items[e]);else for(let t in this.items)this.items[t].el.off("contextmenu",this.handlers[e]),this.items[t].el.remove(),delete this.items[t]}compose(e,t,n){if("function"!=typeof n)return;let i,a,s=this,d=Object.keys(s.items),c=0;d[c]?function h(u){function p(){let e,s,f,g,b,y=l.width,v=l.height,x=i.targetWidth,w=i.width,k=i.alpha,j=i.position,O=i.el[0].offsetHeight/i.el[0].offsetWidth;if(x&&w){switch(o[0].width=y,o[0].height=v,r.drawImage(l,0,0,y,v),g=(f=y/x*w)*O,(b=.008*y)>5&&(b=5),j){case 0:e=s=b;break;case 1:e=y-f-b,s=5;break;case 2:e=(y-f)/2,s=(v-g)/2;break;case 3:e=5,s=v-g-b;break;default:e=y-f-b,s=v-g-b}r.globalAlpha=k/100,r.drawImage(i.el[0],e,s,f,g),t[u]=o[0].toFile(a.name,a.type)}l.removeEventListener("load",p),l.removeEventListener("error",m),d[++c]?h(d[c]):n()}function m(){l.removeEventListener("load",p),l.removeEventListener("error",m),d[++c]?h(d[c]):n()}1===(i=s.items[u]).status?(a=e[u],o.width=0,o.height=0,l.addEventListener("load",p),l.addEventListener("error",m),l.src=a.url):d[++c]?h(d[c]):n()}(d[c]):n()}};const m=a.a.upload,f={css:"max-width: 360px;",type:"danger"},g=[],b={type:`仅支持以下类型：\n                <ul>\n                    <li>图片：${m.type.image.join(", ")}</li>\n                    <li>视频：${m.type.video.join(", ")}</li>\n                    <li>音频：${m.type.audio.join(", ")}</li>\n                    <li>其他：${m.type.other.join(", ")}</li>\n                </ul>`,size:`文件大小上限详情如下：\n                <ul>\n                    <li>图片：${m.size.image}(MB)</li>\n                    <li>视频：${m.size.video}(MB)</li>\n                    <li>音频：${m.size.audio}(MB)</li>\n                    <li>其他：${m.size.other}(MB)</li>\n                </ul>`};for(let e in m.type)m.type.hasOwnProperty(e)&&m.type[e].forEach(e=>{g.push(e)});var y=new class{constructor(){this.items=Object.create(null)}add(e,t){let n=t.name.slice(t.name.lastIndexOf(".")+1).toLowerCase(),i=t.type.split(/\//g)[0],a=(t.size/1048576).toFixed(2);return g.includes(n)?a>m.size[i]?(f.title="文件过大",f.body="文件“"+t.name+"大小（"+a+"MB）超出上限，"+b.size,void s.a.dialog(f)):this.items[e]?(f.title="文件重复",f.body="文件“"+t.name+"”可能是重复的，请检查。",void s.a.dialog(f)):(this.items[e]=t,!0):(f.title="格式错误",f.body="不支持“"+n+"”，"+b.type,void s.a.dialog(f))}remove(e){if(e)delete this.items[e];else for(e in this.items)delete this.items[e]}};const v=document.createElement("canvas"),x=v.getContext("2d");let w,k,j=a.a.upload.thumb.width||480,O=a.a.upload.thumb.height||270;function E(e){this.removeEventListener(e.type,E),this.removeEventListener("error",N),v.width=v.height=0;let t=this.width||this.videoWidth,n=this.height||this.videoHeight;"auto"===j?"auto"===O?(j=480,O=Math.round(480*n/t)):j=Math.round(O*t/n):"auto"===O&&(O=Math.round(j*n/t)),v.width=j,v.height=O,x.drawImage(this,0,0,t,n,0,0,j,O),w(v.toFile(j+"x"+O+".jpg","image/jpeg"))}function N(e){this.removeEventListener("load",E),this.removeEventListener("loadeddata",E),this.removeEventListener("error",N),k(e.message)}var A=(e,t,n)=>{if(/^image/i.test(e)){let e=new Image;e.addEventListener("load",E),e.addEventListener("error",N),e.src=t}else if(/^video/i.test(e)){let e=document.createElement("video");e.addEventListener("loadeddata",E),e.addEventListener("error",N),e.src=t,n&&n.length&&(e.currentTime=n[0].currentTime||0)}return new Promise((e,t)=>{w=e,k=t})};const C=a.a.upload.field,T=a.a.upload.path,L=new XMLHttpRequest,M=Object(i.a)('<div class="re-loading"></div>');let S,R,z,H;function F(e){if(!e)return;_.curid=R=e;let t=!1;(S=new FormData).append(C,y.items[e]),S.append("subid",e),z.form(e).each(n=>{/checkbox|radio/i.test(n.type)?(S.append(n.name,n.checked?1:""),t=/^(image|video)/i.test(y.items[e].type)&&"thumb"===n.name&&n.checked):S.append(n.name,n.value)}),t?A(z.items[e].type,z.items[e].url,z.items[e].el.find("video")).then(e=>{S.append("thumb",e),D()}).catch(e=>{s.a.dialog({type:"warning",title:"上传失败",body:"生成缩略图失败。"+(e?"error: "+e:""),css:"max-width:360px;"})}):D()}function D(){L.open("post",T+"?Reditor=upload",!0),L.send(S)}L.on=L.addEventListener,L.upload.on=L.upload.addEventListener,L.responseType="json",L.on("loadstart",()=>{H="",z.items[R].tick="已上传...0%"}),L.upload.on("progress",e=>{e.total>0&&e.loaded>0?z.items[R].tick="已上传... "+Math.round(1e4*e.loaded/e.total)/100+" %":z.items[R].tick="已上传...0%"}),L.on("timeout",()=>{H="连接超时！"}),L.on("abort",()=>{H="删除文件，已终止上传！"}),L.on("loadend",()=>{let e=L.response;if(e&&0===e.code&&e.data){if(z.items[R].status=0,z.items[R].selected=!0,z.items[R].url=e.data.url,z.items[R].tick="上传于："+new Date(e.data.date).format("Y-M-D H:I:S"),p.remove(R),y.remove(R),/^image/i.test(z.items[R].type)){let t=new Image;z.items[R].el.find(".re-upload-item-preview").append(M),t.onload=function(){M.remove(),t=t.onload=null},t.src=e.data.url}e.data.thumb&&z.items[R].el.find("video").attr("poster",e.data.thumb),F(Object.keys(y.items)[0])}else e&&e.hasOwnProperty("code")&&e.data?e.code>0&&s.a.dialog({type:"warning",title:"上传失败",body:"来自服务器的错误提示："+e.message,css:"max-width:360px;"}):s.a.dialog({type:"warning",title:"上传失败",body:H||"服务器无响应或响应的数据格式错误。",css:"max-width:360px;"}),z.items[R].tick="<b>等待上传...</b>"});const _={curid:null,start(e){z=e,e=null,s.a.isEmpty(y.items)?s.a.dialog({type:"warning",title:"空文件夹",body:"空文件夹，请添加文件",css:"max-width:360px;"}):F(Object.keys(y.items)[0])},stop(){L.abort()}};var I=_;class ${constructor(){this.items=Object.create(null),this.ondelete=null}static observe(e,t,n,i){Object.defineProperty(e,t,{set(e){n!==e&&(n=e,i&&i(e))},get:()=>n})}create(e,t,n=null){if(n&&!y.add(e,n))return;this.items[e]=t;let s=this,o=Object(i.a)('<div class="re-upload-item'+(t.status>0?"":" re-upload-loaded")+'">'),r=Object(i.a)('<div class="re-upload-item-inner">'),l=Object(i.a)('<div class="re-upload-item-preview re-alpha">'),d=Object(i.a)('<div class="re-upload-item-tick">'+(t.tick||"")+"</div>"),c=Object(i.a)('<div class="re-upload-item-info">'),h=Object(i.a)('<div class="re-upload-item-filename">'+(t.name||"")+"</div>"),u=Object(i.a)('<form class="re-upload-item-form">'+(a.a.upload.form||"")+"</form>"),m=null,f=Object(i.a)('<i class="re-close icon icon-close1">'),g=(new Date).getTime();function b(t){let n=t.target;if(Object(i.a)(n).hasClass("re-close"))s.remove(e);else if(!/input|button|textarea/i.test(n.tagName)&&0===s.items[e].status){s.items[e].selected=!s.items[e].selected;let n=s.items[e].selected;if(t.ctrlKey)for(let e in s.items)s.items[e].selected=n;else s.items[e].selected=n}}return/^(video|audio)\//.test(t.type)?(m=Object(i.a)('<video class="re-upload-item-media" src="'+t.url+'"'+(t.thumb?'poster="'+t.thumb+(0===t.status?"?t="+g:"")+'"':"")+" controls>浏览器不支持播放器</video>"),$.observe(this.items[e],"url",t.url,e=>{m[0].src=e})):(m=Object(i.a)('<div class="re-upload-item-media">'),/^image\//.test(t.type)?(m[0].style="background:url("+t.url+(0===t.status?"?t="+g:"")+") no-repeat center; background-size: contain;",t.status>0&&l.append(p.create(e)),$.observe(this.items[e],"url",t.url,e=>{m[0].style.backgroundImage="url("+e+")"})):(m.addClass("noview"),m[0].innerHTML=t.name.slice(t.name.lastIndexOf(".")+1).toUpperCase())),$.observe(this.items[e],"tick",t.tick,e=>{d[0].innerHTML=e}),$.observe(this.items[e],"status",t.status,e=>{e>0?o.removeClass("re-upload-loaded"):o.addClass("re-upload-loaded")}),$.observe(this.items[e],"selected",t.selected,e=>{e?o.addClass("re-upload-selected"):o.removeClass("re-upload-selected")}),l.append(h,m),c.append(u,d),r.append(f,l,c),o.append(r),o.on("click",b),this.items[e].handler=b,this.items[e].el=o,o}remove(e){if(e)this.ondelete&&this.ondelete(e),$.del(e,this.items);else{for(e in this.items)this.ondelete&&this.ondelete(e),$.del(e,this.items);I.stop()}}static del(e,t){e===I.curid&&I.stop();try{t[e].el.off("click",t[e].handler),t[e].el.remove(),p.items[e]&&p.remove(e),window.revokeURL(t[e].url),y.remove(e),delete t[e]}catch(e){console.log(e.message)}}form(e){return this.items[e].el.find("form [name]")}upload(){p.compose(this.items,y.items,()=>{I.start(this)})}}var P=new $;var B=new class{constructor(){let e=this;this.input=document.createElement("input"),this.input.type="file",this.input.multiple=!0,this.choser=null,this.upload=null,this.clear=null,this.list=null,this.handlers={choser(){e.input.value="",document.body.appendChild(e.input),e.input.click(),document.body.removeChild(e.input)},upload(){P.upload()},clear(){P.remove()},input(){let t,n,i=document.createDocumentFragment(),a=e.input.files.length,s=0;for(;s<a&&(t=e.input.files[s],(n=P.create("re"+t.lastModified+t.size,{url:window.createURL(t),name:t.name,type:t.type,tick:"<b>等待上传...</b>",status:1},t))&&n[0]);s++)i.appendChild(n[0]);e.list.prepend(i)}}}init(e){this.choser=e.choser,this.upload=e.upload,this.clear=e.clear,this.list=e.list,this.choser.on("click",this.handlers.choser),this.upload.on("click",this.handlers.upload),this.clear.on("click",this.handlers.clear),Object(i.a)(this.input).on("change",this.handlers.input)}destroy(){this.choser.off("click",this.handlers.choser),this.upload.off("click",this.handlers.upload),this.clear.off("click",this.handlers.clear),Object(i.a)(this.input).off("change",this.handlers.input)}};const U=new XMLHttpRequest;let Y=null,W=Object(i.a)('<div class="re-loading"></div>');function G(){Y.append(W),U.open("get",a.a.upload.path+"?Reditor=load&date=20180529"),U.send()}U.responseType="json",U.addEventListener("load",()=>{let e=U.response,t=document.createDocumentFragment(),n=[];if(e){for(let t in e.data)n.push(e.data[t]);n.sort(function(e,t){return e.date<t.date}),n.forEach(e=>{e.tick="上传于："+new Date(e.date).format("Y-M-D H:I:S"),e.status=0,e.selected=!1,t.appendChild(P.create(e.resid,e)[0])}),Y.find(".re-upload-loaded").remove(),Y.append(t)}}),U.addEventListener("loadend",()=>{try{W.remove()}catch(e){}}),P.ondelete=function(e){0===P.items[e].status&&(U.open("get",a.a.upload.path+"?Reditor=delete&resid="+e+"&date="+new Date(P.items[e].date).format("YMD")),U.send())};var K={init(e){Y=e,G()},reload(){G()}};let X=document.body,q=Object(i.a)('<div class="re-upload">\n        <div class="re-upload-wrapper">\n            <b class="re-dialog-close">×</b>\n            <div class="re-upload-header re-success">文件系统</div>\n            <div class="re-upload-toolbar">\n                <button id="re-upload-choser" class="re-btn-m re-btn-success">添加</button>\n                <button id="re-upload-upload" class="re-btn-m re-btn-warning">上传</button>\n                <button id="re-upload-clear" class="re-btn-m re-btn-danger">清空</button>\n            </div>\n            <div id="re-upload-body" class="re-upload-body"></div>\n            <div class="re-upload-footer">\n                <button id="re-upload-use" class="re-btn-m re-btn-success">使用</button>\n                <button id="re-upload-refresh" class="re-btn-m re-btn-warning">刷新</button>\n            </div>\n        </div>\n    </div>'),V=q.find("#re-upload-body"),J=null;q.on("click",function(e){(e.target===this||Object(i.a)(e.target).hasClass("re-dialog-close"))&&X.removeChild(q[0])}),K.init(V),q.find("#re-upload-refresh").on("click",function(){K.reload()}),B.init({choser:q.find("#re-upload-choser"),upload:q.find("#re-upload-upload"),clear:q.find("#re-upload-clear"),list:V}),q.find("#re-upload-use").on("click",function(){let e,t;for(let n in P.items)if(P.items[n].selected){switch((t=P.items[n]).type.split(/\//)[0]){case"image":J.addMedia(t.url,"image");break;case"video":J.addMedia(t.url,"video",t.thumb);break;case"audio":J.addMedia(t.url,"audio");break;default:(e=document.createElement("a")).href=t.url,e.innerHTML=e.download=t.name,J.range.deleteContents&&J.range.deleteContents(),J.range.insertNode(e),J.range.collapse(!1)}t.selected=!1}q.addClass("re-upload-hide")});t.default=(e=>{X.appendChild(q[0]),J=e})},function(e,t,n){"use strict";n.r(t);var i=n(2);let a=!1,s=!1;t.default=function(e,t,n,o){let r=e.edit;if(null,s)l();else{let e=document.createElement("script");e.onload=l,e.src=i.a.tools[t].params,document.head.appendChild(e)}function l(){s=!0,o.innerText=a?"简":"繁",(a=!a)?r.html(function(e){let t;for(let n in zh2Hant)t=new RegExp(n,"ig"),e=e.replace(t,zh2Hant[n]);for(let n in zh2HK)t=new RegExp(n,"ig"),e=e.replace(t,zh2HK[n]);return t=null,e}(r.html())):r.html(function(e){let t;for(let n in zh2Hant)t=new RegExp(zh2Hant[n],"ig"),e=e.replace(t,n);for(let n in zh2HK)t=new RegExp(zh2HK[n],"ig"),e=e.replace(t,n);return t=null,e}(r.html()))}}},function(e,t,n){"use strict";n.r(t);var i=n(2),a=n(1);t.default=((e,t)=>{let n,s,o,r,l,d,c,h,u,p,m;function f(){p=document.getSelection(),m=document.createRange(),u=h.exec(r[l].data),p.rangeCount&&p.removeAllRanges(),null!==u?(m.setStart(r[l],u.index),m.setEnd(r[l],u.index+c),p.addRange(m)):l<d-1?l++:l=0}a.a.dialog({title:i.a.tools[t].title,body:`<p>查找字符：<input type="text" name="oldval" value="${e.range+""}"></p>\n            <p>替换成为：<input type="text" name="newval"></p>\n            <p>区分大小写：<input class="re-checkbox-s" type="checkbox" name="matchcase"></p>`,btns:["下一个","替换","全部"],created(t){n=t.find("[name=oldval]"),s=t.find("[name=newval]"),o=t.find("[name=matchcase]"),r=e.edit.textNodes(),d=r.length,l=0,c=n[0].value.length;let i=n[0].value,a="ig";h=new RegExp(i,a),n.on("change",function(){c=this.value.length,i=this.value,h=new RegExp(i,a)}),o.on("change",function(){a=this.checked?"g":"ig",h=new RegExp(i,a)})},clicked(e){switch(e){case 0:return f(),!1;case 1:return n[0].blur(),s[0].blur(),document.execCommand("insertText",null,s[0].value),f(),!1;case 2:r.forEach(e=>{e.data=e.data.replace(h,s[0].value)})}}})})},function(e,t,n){"use strict";n.r(t);var i=n(1);t.default=(e=>{i.a.dialog({title:"添加超链接",css:"max-width: 360px;",body:'\n\t\t\t<p>输入地址：\n\t\t\t\t<input class="re-input-m" type="text" name="url" value="http://" style="width: 240px;">\n\t\t\t</p>\n\t\t\t<p>打开模式：\n\t\t\t\t<select class="re-input-m" name="target">\n\t\t\t\t\t<option value="_blank">在新建窗口打开</option>\n\t\t\t\t\t<option value="_self">在当前窗口打开</option>\n\t\t\t\t</select>\n\t\t\t</p>\n\t\t',btns:["确定",{html:"取消",type:"warning"}],clicked(t,n){if(t)return;let a,s,o=n.find('[name="url"]')[0].value,r=n.find('[name="target"]')[0].value;if(!/^http[s]?:\/\/[^.\s]+\.\S+/.test(o))return i.a.dialog({title:"地址错误",body:"输入的超链接地地不符合。<br>注意：<br>1.不能缺少http://或https://头。<br>2.不能为空或无效链接。",type:"danger"}),i.a.range(e.range),!1;i.a.exec({cmdName:"createLink",cmdValue:o+"__target_"+r,range:e.range}),(a=e.edit.find('a[href$="__target_'+r+'"]')).length&&(s=new RegExp("__target_"+r+"[/]?$","g"),a.each(e=>{e.href=e.href.replace(s,""),"_blank"===r&&(e.target="_blank")}))}})})},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=n(2).a.tools.linespacing.params,s=a.length,o=0,r=[];for(;o<s;o++)r.push({css:"white-space:nowrap;font-size:14px;",html:a[o]+" 倍",data:{linespacing:a[o]}});t.default=function(e,t,n){i.a.menu({items:r,x:n.clientX,y:n.clientY,onclick(n){if(!e.range||e.range.collapsed)return;let a,s,o;if(a=e.range.startContainer){for(;1!==a.nodeType||"P"!==a.tagName;)a=a.parentNode;if(a.style.lineHeight=n.data(t),!a.nextSibling)return;for((s=i.a.range()).selectNode(a.nextSibling),o=s.compareBoundaryPoints(Range.END_TO_START,e.range);o<1;){if((a=a.nextSibling).style.lineHeight=n.data(t),s.detach(),!a.nextSibling)return;s.selectNode(a.nextSibling),o=s.compareBoundaryPoints(Range.END_TO_START,e.range)}}}})}},function(e,t,n){"use strict";n.r(t);var i=n(0);t.default=((e,t)=>{let n=e.range.startContainer,a=null;1===n.nodeType?a=Object(i.a)(n):3===n.nodeType&&(a=Object(i.a)(n.parentNode)),a.css("text-align","").parents("p",e.edit[0]).css("text-align",""),a.parents("div",e.edit[0]).css("text-align",""),document.execCommand(t)})},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=n(2).a.tools.forecolor.params,s=a.length,o=0,r=[];for(;o<s;o++)r.push({css:"width:100px;height:15px;margin:2px 5px;padding:0;border:#ddd 1px solid; background-color: "+a[o]+";",data:{forecolor:a[o]}});t.default=((e,t,n)=>{i.a.menu({items:r,x:n.clientX,y:n.clientY,onclick(n){i.a.exec({cmdName:t,cmdValue:n.data(t),range:e.range})}})})},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=n(2).a.tools.fontsize.params,s=a.length,o=0,r=[];for(;o<s;o++)r.push({css:"font-size:"+a[o]+"px;white-space:nowrap;",html:a[o]+"px",data:{fontsize:a[o]+"px"}});t.default=function(e,t,n){i.a.menu({items:r,x:n.clientX,y:n.clientY,onclick(n){i.a.exec({name:"font-size",value:n.data(t),cmdName:"fontsize",cmdValue:1,range:e.range,context:e.edit,selector:['[style*="font-size: x-small"]','font[size="1"]']})}})}},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=n(2).a.tools.fontname.params,s=a.length,o=0,r=[];for(;o<s;o++)r.push({css:"font-family:"+a[o]+";white-space:nowrap;",html:a[o],data:{fontname:a[o]}});t.default=function(e,t,n){i.a.menu({items:r,x:n.clientX,y:n.clientY,onclick(n){i.a.exec({cmdName:t,cmdValue:n.data(t),range:e.range})}})}},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=["abbr","audio","b","bdo","br","button","canvas","cite","code","command","data","datalist","dfn","em","embed","i","iframe","img","input","kbd","keygen","label","mark","math","meter","noscript","object","output","progress","q","ruby","samp","script","select","small","span","strong","sub","sup","svg","textarea","time","var","video","wbr"];t.default=((e,t)=>{i.a.dialog({title:e.options.tools[t].title,css:"max-width: 640px; width:100%;",body:'<textarea style="width: 100%; min-height: 150px; resize: vertical; box-sizing: border-box;" placeholder="注：多个标签并列时，只有第一个有效。\n\n另外，本功能初衷用途是添加flash代码，比如embed标签。\n\n故，不建议随意添加其他代码，除非特别了解HTML5的规范。"></textarea>',btns:["确定",{type:"warning",html:"取消"}],clicked(t,n){let i=n.find("textarea").val();if(0===t&&i){let t,n=document.createElement("div");if(n.innerHTML=i,3===(t=n.childNodes[0]).nodeType||1===t.nodeType&&a.includes(t.tagName.toLowerCase()))e.range.deleteContents(),e.range.insertNode(n.childNodes[0]);else{let t=e.paragraph();t.parentNode===e.edit[0]&&e.edit[0].insertBefore(n.childNodes[0],t)}n=null}}})})},function(e,t,n){"use strict";n.r(t);var i=n(1);let a=n(2).a.tools.backcolor.params,s=a.length,o=0,r=[];for(;o<s;o++)r.push({css:"width:100px;height:15px;margin:2px 5px;padding:0;border:#ddd 1px solid; background-color: "+a[o]+";",data:{backcolor:a[o]}});t.default=((e,t,n)=>{i.a.menu({items:r,x:n.clientX,y:n.clientY,onclick(n){i.a.exec({cmdName:t,cmdValue:n.data(t),range:e.range})}})})},function(e,t,n){var i={"./backcolor.js":14,"./code.js":13,"./fontname.js":12,"./fontsize.js":11,"./forecolor.js":10,"./justifyleft.js":9,"./linespacing.js":8,"./link.js":7,"./replace.js":6,"./upload.js":4,"./zhconv.js":5};function a(e){var t=s(e);return n(t)}function s(e){var t=i[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(i)},a.resolve=s,e.exports=a,a.id=15},function(e,t){Array.prototype.includes||(Array.prototype.includes=function(e){return-1!==this.indexOf(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if("function"==typeof e)for(let t=0,n=this.length;t<n;t++)e(this[t],t)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),window.createURL=function(e){return window[window.URL?"URL":"webkitURL"].createObjectURL(e)},window.revokeURL=function(e){return window[window.URL?"URL":"webkitURL"].revokeObjectURL(e)},Math.fsize=function(e,t=2){return e<1024?e+"B":e<1048576?(e/1024).toFixed(t)+"KB":e<1073741824?(e/1048576).toFixed(t)+"MB":(e/1073741824).toFixed(t)+"GB"},Date.prototype.format=function(e="Y-m-d"){let t={Y:this.getFullYear(),m:this.getMonth()+1,d:this.getDate(),h:this.getHours(),i:this.getMinutes(),s:this.getSeconds(),c:this.getMilliseconds()};if(t.y=(t.Y+"").slice(2),t.M=(t.m+100+"").slice(1),t.D=(t.d+100+"").slice(1),t.H=(t.h+100+"").slice(1),t.I=(t.i+100+"").slice(1),t.S=(t.s+100+"").slice(1),t.C=(t.c+1e3+"").slice(1),"string"==typeof e){for(let n=(e=e.split("")).length;n--;){let i=e[n];t[i]&&(e[n]=t[i])}return e.join("")}return t.Y+"-"+t.M+"-"+t.D+" "+t.H+":"+t.I+":"+t.S+":"+t.C},HTMLCanvasElement.prototype.toFile=function(e="file.png",t="image/png"){let n,i,a,s;for(n=this.toDataURL(t),n=window.atob(n.replace(/^data:(image\/[\w-]+);base64,/,"")),i=new Uint8Array(a=n.length),s=0;s<a;s++)i[s]=n.charCodeAt(s);return new File([i],e,{type:t,endings:"transparent"})},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})}]);